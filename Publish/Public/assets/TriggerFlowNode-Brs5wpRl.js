import{_ as Z,W as j,r as d,m as E,z as _,c as s,o as r,a as t,b as u,n as w,d as c,u as n,w as i,t as m,v as g,e as $,M as F,S as ee,X as te,F as U,f as N,I as oe,h as M,i as z,C as B,j as L,k as le,l as ae}from"./vue-B8gUvkUI.js";const re={class:"flex items-center justify-between mb-4"},se={class:"flex items-center gap-3 flex-1 min-w-0"},ne={class:"flex-1 min-w-0"},ie=["title"],de={class:"flex items-center gap-2 mt-0.5"},ue={class:"text-xs text-gray-400 leading-none truncate"},ce={class:"w-3 h-3 bg-yellow-500/30 border border-yellow-500/50 rounded-full flex items-center justify-center"},ge={key:0,class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50"},be={class:"bg-gray-900/95 backdrop-blur-sm border border-gray-700 rounded-lg p-3 shadow-xl max-w-xs"},me={class:"text-xs text-gray-200 whitespace-pre-wrap"},we={class:"flex items-center gap-1 ml-2"},fe={key:0,class:"mb-4 p-3 bg-white/5 border border-white/10 rounded-lg space-y-3"},pe={class:"space-y-2"},xe={class:"space-y-2"},he={class:"space-y-2"},ye={class:"flex gap-2"},ve=["onClick","title"],ke={key:1,class:"mb-4 p-3 bg-yellow-500/5 border border-yellow-500/20 rounded-lg"},Ce={class:"flex items-center gap-2 mb-2"},Te={class:"flex justify-end gap-2 mt-2"},Fe={class:"space-y-4"},Ve={class:"space-y-2"},Ie={class:"relative"},De={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl z-50 max-h-40 overflow-y-auto"},Se=["onClick"],je={class:"font-medium text-white"},Ee={class:"text-xs text-gray-400"},$e={key:0,class:"bg-white/5 border border-white/10 rounded-lg p-3"},Ue={class:"text-sm font-medium text-pink-400"},Ne={class:"text-xs text-gray-400"},Me={class:"space-y-2"},ze={class:"grid grid-cols-2 gap-3"},Be={class:"space-y-2"},Le={class:"space-y-2"},Oe={class:"space-y-3"},Re={class:"flex items-center gap-3 cursor-pointer group"},Ae={class:"relative"},We={key:0,class:"ml-7 space-y-2"},qe={class:"flex items-center gap-3 cursor-pointer group"},Ge={class:"relative"},Ke={class:"absolute top-1/2 -left-2 transform -translate-y-1/2"},Pe={class:"absolute top-1/2 -right-2 transform -translate-y-1/2"},He=Object.assign({nodeMetadata:{category:"Flow Control",icon:j,label:"Trigger Flow",initialData:{flowId:"",selectedFlow:null,inputVariable:"status",targetVariableName:"dataInput",waitForCompletion:!0,resultVariable:"flowResult",async:!1,customTitle:"",customDescription:"",comment:"",colorTheme:"pink"}}},{__name:"TriggerFlowNode",props:["data","variables"],emits:["delete"],setup(o,{emit:Qe}){const b=o,p=d(""),x=d(!1),k=d([]),V=d(!1),f=d(!1),y=d(!1),v=d(!1),h=d(""),C=d(null),T=d(!1),O=[{name:"purple",label:"Purple",gradient:"linear-gradient(145deg, #8b5cf6, #7c3aed)"},{name:"blue",label:"Blue",gradient:"linear-gradient(145deg, #3b82f6, #1d4ed8)"},{name:"green",label:"Green",gradient:"linear-gradient(145deg, #10b981, #059669)"},{name:"red",label:"Red",gradient:"linear-gradient(145deg, #ef4444, #dc2626)"},{name:"yellow",label:"Yellow",gradient:"linear-gradient(145deg, #f59e0b, #d97706)"},{name:"pink",label:"Pink",gradient:"linear-gradient(145deg, #ec4899, #db2777)"},{name:"gray",label:"Gray",gradient:"linear-gradient(145deg, #6b7280, #4b5563)"},{name:"orange",label:"Orange",gradient:"linear-gradient(145deg, #f97316, #ea580c)"}];function R(){const a=b.data.colorTheme||"pink",e={purple:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 border-purple-500/20",blue:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 border-blue-500/20",green:"bg-gradient-to-br from-green-500/20 to-green-600/20 border-green-500/20",red:"bg-gradient-to-br from-red-500/20 to-red-600/20 border-red-500/20",yellow:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/20 border-yellow-500/20",pink:"bg-gradient-to-br from-pink-500/20 to-pink-600/20 border-pink-500/20",gray:"bg-gradient-to-br from-gray-500/20 to-gray-600/20 border-gray-500/20",orange:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 border-orange-500/20"};return e[a]||e.pink}function A(){const a=b.data.colorTheme||"pink",e={purple:"text-purple-400",blue:"text-blue-400",green:"text-green-400",red:"text-red-400",yellow:"text-yellow-400",pink:"text-pink-400",gray:"text-gray-400",orange:"text-orange-400"};return e[a]||e.pink}function W(){f.value=!f.value,y.value=!1}function q(){f.value=!1}function G(){y.value=!y.value,f.value=!1}function K(){v.value=!0,h.value=b.data.customTitle||"Trigger Flow",le(()=>{C.value?.focus(),C.value?.select()})}function I(){b.data.customTitle=h.value.trim(),v.value=!1}function P(){v.value=!1,h.value=""}E(()=>b.variables?Object.keys(b.variables):[]),_(async()=>{await H(),document.addEventListener("click",Y)});const H=async()=>{try{V.value=!0;const a=await fetch("/api/witchcraft/diagrams");a.ok&&(k.value=await a.json())}catch(a){console.error("Failed to load flows:",a)}finally{V.value=!1}},D=E(()=>{if(!p.value)return k.value.slice(0,10);const a=p.value.toLowerCase();return k.value.filter(e=>e.name.toLowerCase().includes(a)||e.description?.toLowerCase().includes(a)||e.id.toString().includes(a)).slice(0,10)});let S;const Q=()=>{clearTimeout(S),S=setTimeout(()=>{x.value=!0},300)},X=a=>{b.data.selectedFlow=a,b.data.flowId=a.id,p.value=a.name,x.value=!1},Y=a=>{a.target.closest(".relative")||(x.value=!1)};return(a,e)=>(r(),s("div",{class:w(`bg-white/[0.02] backdrop-blur-xl border border-white/10 rounded-xl p-5 min-w-[320px] relative shadow-2xl transition-all duration-300 node-${o.data.colorTheme||"pink"}`)},[t("div",re,[t("div",se,[t("div",{class:w(["w-9 h-9 rounded-lg flex items-center justify-center border transition-all duration-300",R()])},[c(n(j),{class:w(`w-5 h-5 transition-colors duration-300 ${A()}`)},null,8,["class"])],2),t("div",ne,[v.value?i((r(),s("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),onBlur:I,onKeydown:[$(I,["enter"]),$(P,["escape"])],ref_key:"titleInput",ref:C,class:"font-semibold text-white text-sm bg-transparent border-b border-pink-500 outline-none w-full",placeholder:"Enter custom title"},null,544)),[[g,h.value]]):(r(),s("div",{key:0,onClick:K,class:"font-semibold text-white text-sm cursor-pointer hover:text-pink-400 transition-colors truncate",title:o.data.customTitle||"Trigger Flow"},m(o.data.customTitle||"Trigger Flow"),9,ie)),t("div",de,[t("p",ue,m(o.data.customDescription||"Execute other workflows"),1),o.data.comment&&o.data.comment.trim()?(r(),s("div",{key:0,class:"relative comment-indicator",onMouseenter:e[1]||(e[1]=l=>T.value=!0),onMouseleave:e[2]||(e[2]=l=>T.value=!1)},[t("div",ce,[c(n(F),{class:"w-2 h-2 text-yellow-400"})]),T.value?(r(),s("div",ge,[t("div",be,[e[16]||(e[16]=t("div",{class:"text-xs font-medium text-yellow-400 mb-1"},"Comment:",-1)),t("div",me,m(o.data.comment),1),e[17]||(e[17]=t("div",{class:"absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-900 border-r border-b border-gray-700 rotate-45"},null,-1))])])):u("",!0)],32)):u("",!0)])])]),t("div",we,[t("button",{onClick:W,class:w(`w-8 h-8 rounded-lg transition-all duration-200 flex items-center justify-center group ${o.data.comment&&o.data.comment.trim()?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"hover:bg-yellow-500/10 text-gray-400 hover:text-yellow-400"}`),title:"Add/Edit Comment"},[c(n(F),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})],2),t("button",{onClick:G,class:"w-8 h-8 rounded-lg hover:bg-pink-500/10 text-gray-400 hover:text-pink-400 transition-all duration-200 flex items-center justify-center group",title:"Node Settings"},[c(n(ee),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})]),t("button",{onClick:e[3]||(e[3]=l=>a.$emit("delete")),class:"w-8 h-8 rounded-lg hover:bg-red-500/10 text-gray-400 hover:text-red-400 transition-all duration-200 flex items-center justify-center group"},[c(n(te),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})])])]),y.value?(r(),s("div",fe,[t("div",pe,[e[18]||(e[18]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Custom Title",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.data.customTitle=l),placeholder:"Enter custom node title",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.customTitle]])]),t("div",xe,[e[19]||(e[19]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Custom Description",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.data.customDescription=l),placeholder:"Enter custom description",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.customDescription]])]),t("div",he,[e[20]||(e[20]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Color Theme",-1)),t("div",ye,[(r(),s(U,null,N(O,l=>t("button",{key:l.name,onClick:J=>o.data.colorTheme=l.name,class:w(`w-6 h-6 rounded-lg border-2 transition-all duration-200 ${o.data.colorTheme===l.name?"border-white scale-110":"border-gray-600 hover:border-gray-500"}`),style:ae({background:l.gradient}),title:l.label},null,14,ve)),64))])])])):u("",!0),f.value?(r(),s("div",ke,[t("div",Ce,[c(n(F),{class:"w-4 h-4 text-yellow-400"}),e[21]||(e[21]=t("span",{class:"text-sm font-medium text-yellow-400"},"Comment",-1))]),i(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>o.data.comment=l),placeholder:"Add a comment to help document this node's purpose...",rows:"3",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 resize-none focus:bg-white/10 focus:border-yellow-500/50 focus:ring-2 focus:ring-yellow-500/20 transition-all duration-200 outline-none"},"            ",512),[[g,o.data.comment]]),t("div",Te,[t("button",{onClick:e[7]||(e[7]=l=>f.value=!1),class:"px-3 py-1 text-xs text-gray-400 hover:text-white transition-colors"}," Cancel "),t("button",{onClick:q,class:"px-3 py-1 text-xs bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 rounded transition-colors"}," Save ")])])):u("",!0),t("div",Fe,[t("div",Ve,[e[22]||(e[22]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Target Flow",-1)),t("div",Ie,[i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>p.value=l),onInput:Q,onFocus:e[9]||(e[9]=l=>x.value=!0),placeholder:"Search and select flow...",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 pr-10 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,544),[[g,p.value]]),c(n(oe),{class:"absolute right-3 top-3 w-4 h-4 text-gray-400"}),x.value&&D.value.length>0?(r(),s("div",De,[(r(!0),s(U,null,N(D.value,l=>(r(),s("div",{key:l.id,onClick:J=>X(l),class:"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0 transition-all duration-200"},[t("div",je,m(l.name),1),t("div",Ee,"ID: "+m(l.id)+" â€¢ "+m(l.description||"No description"),1)],8,Se))),128))])):u("",!0)]),o.data.selectedFlow?(r(),s("div",$e,[t("div",Ue,"Selected: "+m(o.data.selectedFlow.name),1),t("div",Ne,"ID: "+m(o.data.selectedFlow.id),1)])):u("",!0)]),t("div",Me,[e[23]||(e[23]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Or Flow ID",-1)),i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.data.flowId=l),type:"number",placeholder:"Enter flow ID manually",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.flowId]]),e[24]||(e[24]=t("div",{class:"text-xs text-pink-400/70"},"Use this if you know the exact Flow ID",-1))]),t("div",ze,[t("div",Be,[e[25]||(e[25]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Input Variable",-1)),i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>o.data.inputVariable=l),placeholder:"status",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.inputVariable]])]),t("div",Le,[e[26]||(e[26]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Target Variable Name",-1)),i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>o.data.targetVariableName=l),placeholder:"dataInput",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.targetVariableName]])])]),t("div",Oe,[t("label",Re,[t("div",Ae,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=l=>o.data.waitForCompletion=l),class:"sr-only"},null,512),[[M,o.data.waitForCompletion]]),t("div",{class:w(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-pink-400/50 transition-colors flex items-center justify-center",o.data.waitForCompletion?"bg-pink-500 border-pink-500":""])},[o.data.waitForCompletion?(r(),z(n(B),{key:0,class:"w-3 h-3 text-white"})):u("",!0)],2)]),e[27]||(e[27]=t("span",{class:"text-sm text-gray-300 group-hover:text-white transition-colors"},"Wait for Completion",-1))]),o.data.waitForCompletion?(r(),s("div",We,[e[28]||(e[28]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Result Variable",-1)),i(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>o.data.resultVariable=l),placeholder:"flowResult",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.resultVariable]])])):u("",!0),t("label",qe,[t("div",Ge,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=l=>o.data.async=l),class:"sr-only"},null,512),[[M,o.data.async]]),t("div",{class:w(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-pink-400/50 transition-colors flex items-center justify-center",o.data.async?"bg-pink-500 border-pink-500":""])},[o.data.async?(r(),z(n(B),{key:0,class:"w-3 h-3 text-white"})):u("",!0)],2)]),e[29]||(e[29]=t("span",{class:"text-sm text-gray-300 group-hover:text-white transition-colors"},"Async Execution",-1))])])]),t("div",Ke,[c(n(L),{type:"target",position:"left",class:"!w-4 !h-4 !bg-gray-600 !border-2 !border-gray-800 hover:!bg-pink-500 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})]),t("div",Pe,[c(n(L),{type:"source",position:"right",class:"!w-4 !h-4 !bg-pink-500 !border-2 !border-gray-800 hover:!bg-pink-400 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})])],2))}}),Ye=Z(He,[["__scopeId","data-v-1c767ec0"]]);export{Ye as default};
