import{_ as B,r as c,z as K,c as a,o as s,a as t,b as m,n as f,w as n,t as p,v as i,e as M,d,u,M as k,S as O,X as A,F as I,f as S,q as R,g as P,j as T,k as q,l as G}from"./vue-B8gUvkUI.js";const H={class:"flex items-center justify-between mb-4"},X={class:"flex items-center gap-3 flex-1 min-w-0"},Y={class:"flex-1 min-w-0"},J=["title"],Q={class:"flex items-center gap-2 mt-0.5"},W={class:"text-xs text-gray-400 leading-none truncate"},Z={class:"w-3 h-3 bg-yellow-500/30 border border-yellow-500/50 rounded-full flex items-center justify-center"},_={key:0,class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50"},ee={class:"bg-gray-900/95 backdrop-blur-sm border border-gray-700 rounded-lg p-3 shadow-xl max-w-xs"},te={class:"text-xs text-gray-200 whitespace-pre-wrap"},oe={class:"flex items-center gap-1 ml-2"},le={key:0,class:"mb-4 p-3 bg-white/5 border border-white/10 rounded-lg space-y-3"},re={class:"space-y-2"},ae={class:"space-y-2"},se={class:"space-y-2"},ne={class:"flex gap-2"},ie=["onClick","title"],de={key:1,class:"mb-4 p-3 bg-yellow-500/5 border border-yellow-500/20 rounded-lg"},ue={class:"flex items-center gap-2 mb-2"},ce={class:"flex justify-end gap-2 mt-2"},ge={class:"space-y-4"},be={class:"space-y-2"},me=["value"],fe={class:"space-y-2"},pe={class:"text-xs text-purple-400/70"},xe={key:0,class:"space-y-2"},we={class:"space-y-2"},ye={class:"space-y-2"},ve={class:"absolute top-1/2 -left-2 transform -translate-y-1/2"},he={class:"absolute top-1/2 -right-2 transform -translate-y-1/2"},ke={class:"absolute bottom-0 left-1/2 transform translate-y-2 -translate-x-1/2"},Te=Object.assign({nodeMetadata:{category:"Data",icon:null,label:"Model Lookup",initialData:{modelName:"",recordId:"",sourceVariable:"",outputKey:"fetchedRecord",customTitle:"",customDescription:"",comment:"",colorTheme:"purple"}}},{__name:"ModelLookupNode",props:["data"],emits:["delete"],setup(l,{emit:Ce}){const x=l,C=c([]),g=c(!1),w=c(!1),y=c(!1),b=c(""),v=c(null),h=c(!1),$=[{name:"purple",label:"Purple",gradient:"linear-gradient(145deg, #8b5cf6, #7c3aed)"},{name:"blue",label:"Blue",gradient:"linear-gradient(145deg, #3b82f6, #1d4ed8)"},{name:"green",label:"Green",gradient:"linear-gradient(145deg, #10b981, #059669)"},{name:"red",label:"Red",gradient:"linear-gradient(145deg, #ef4444, #dc2626)"},{name:"yellow",label:"Yellow",gradient:"linear-gradient(145deg, #f59e0b, #d97706)"},{name:"pink",label:"Pink",gradient:"linear-gradient(145deg, #ec4899, #db2777)"},{name:"gray",label:"Gray",gradient:"linear-gradient(145deg, #6b7280, #4b5563)"},{name:"orange",label:"Orange",gradient:"linear-gradient(145deg, #f97316, #ea580c)"}];function j(){const r=x.data.colorTheme||"purple",e={purple:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 border-purple-500/20",blue:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 border-blue-500/20",green:"bg-gradient-to-br from-green-500/20 to-green-600/20 border-green-500/20",red:"bg-gradient-to-br from-red-500/20 to-red-600/20 border-red-500/20",yellow:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/20 border-yellow-500/20",pink:"bg-gradient-to-br from-pink-500/20 to-pink-600/20 border-pink-500/20",gray:"bg-gradient-to-br from-gray-500/20 to-gray-600/20 border-gray-500/20",orange:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 border-orange-500/20"};return e[r]||e.purple}function D(){const r=x.data.colorTheme||"purple",e={purple:"text-purple-400",blue:"text-blue-400",green:"text-green-400",red:"text-red-400",yellow:"text-yellow-400",pink:"text-pink-400",gray:"text-gray-400",orange:"text-orange-400"};return e[r]||e.purple}function E(){g.value=!g.value,w.value=!1}function N(){g.value=!1}function U(){w.value=!w.value,g.value=!1}function F(){y.value=!0,b.value=x.data.customTitle||"Model Lookup",q(()=>{v.value?.focus(),v.value?.select()})}function V(){x.data.customTitle=b.value.trim(),y.value=!1}function L(){y.value=!1,b.value=""}K(()=>{z()});const z=async()=>{try{const r=await fetch("/api/witchcraft/tables");r.ok||console.error(`HTTP error! status: ${r.status}`),C.value=await r.json()}catch(r){console.error("Failed to fetch models:",r)}};return(r,e)=>(s(),a("div",{class:f(`bg-white/[0.02] backdrop-blur-xl border border-white/10 rounded-xl p-5 min-w-[320px] relative shadow-2xl transition-all duration-300 node-${l.data.colorTheme||"purple"}`)},[t("div",H,[t("div",X,[t("div",{class:f(["w-9 h-9 rounded-lg flex items-center justify-center border transition-all duration-300",j()])},[(s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:f(`w-5 h-5 transition-colors duration-300 ${D()}`)},e[15]||(e[15]=[t("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"},null,-1),t("path",{d:"M3 5V19A9 3 0 0 0 21 19V5"},null,-1),t("path",{d:"M3 12A9 3 0 0 0 21 12"},null,-1)]),2))],2),t("div",Y,[y.value?n((s(),a("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),onBlur:V,onKeydown:[M(V,["enter"]),M(L,["escape"])],ref_key:"titleInput",ref:v,class:"font-semibold text-white text-sm bg-transparent border-b border-purple-500 outline-none w-full",placeholder:"Enter custom title"},null,544)),[[i,b.value]]):(s(),a("div",{key:0,onClick:F,class:"font-semibold text-white text-sm cursor-pointer hover:text-purple-400 transition-colors truncate",title:l.data.customTitle||"Model Lookup"},p(l.data.customTitle||"Model Lookup"),9,J)),t("div",Q,[t("p",W,p(l.data.customDescription||"Fetch a record by ID from a database model"),1),l.data.comment&&l.data.comment.trim()?(s(),a("div",{key:0,class:"relative comment-indicator",onMouseenter:e[1]||(e[1]=o=>h.value=!0),onMouseleave:e[2]||(e[2]=o=>h.value=!1)},[t("div",Z,[d(u(k),{class:"w-2 h-2 text-yellow-400"})]),h.value?(s(),a("div",_,[t("div",ee,[e[16]||(e[16]=t("div",{class:"text-xs font-medium text-yellow-400 mb-1"},"Comment:",-1)),t("div",te,p(l.data.comment),1),e[17]||(e[17]=t("div",{class:"absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-900 border-r border-b border-gray-700 rotate-45"},null,-1))])])):m("",!0)],32)):m("",!0)])])]),t("div",oe,[t("button",{onClick:E,class:f(`w-8 h-8 rounded-lg transition-all duration-200 flex items-center justify-center group ${l.data.comment&&l.data.comment.trim()?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"hover:bg-yellow-500/10 text-gray-400 hover:text-yellow-400"}`),title:"Add/Edit Comment"},[d(u(k),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})],2),t("button",{onClick:U,class:"w-8 h-8 rounded-lg hover:bg-purple-500/10 text-gray-400 hover:text-purple-400 transition-all duration-200 flex items-center justify-center group",title:"Node Settings"},[d(u(O),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})]),t("button",{onClick:e[3]||(e[3]=o=>r.$emit("delete")),class:"w-8 h-8 rounded-lg hover:bg-red-500/10 text-gray-400 hover:text-red-400 transition-all duration-200 flex items-center justify-center group"},[d(u(A),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})])])]),w.value?(s(),a("div",le,[t("div",re,[e[18]||(e[18]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Custom Title",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.data.customTitle=o),placeholder:"Enter custom node title",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[i,l.data.customTitle]])]),t("div",ae,[e[19]||(e[19]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Custom Description",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.data.customDescription=o),placeholder:"Enter custom description",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[i,l.data.customDescription]])]),t("div",se,[e[20]||(e[20]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Color Theme",-1)),t("div",ne,[(s(),a(I,null,S($,o=>t("button",{key:o.name,onClick:Ve=>l.data.colorTheme=o.name,class:f(`w-6 h-6 rounded-lg border-2 transition-all duration-200 ${l.data.colorTheme===o.name?"border-white scale-110":"border-gray-600 hover:border-gray-500"}`),style:G({background:o.gradient}),title:o.label},null,14,ie)),64))])])])):m("",!0),g.value?(s(),a("div",de,[t("div",ue,[d(u(k),{class:"w-4 h-4 text-yellow-400"}),e[21]||(e[21]=t("span",{class:"text-sm font-medium text-yellow-400"},"Comment",-1))]),n(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.data.comment=o),placeholder:"Add a comment to help document this node's purpose...",rows:"3",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 resize-none focus:bg-white/10 focus:border-yellow-500/50 focus:ring-2 focus:ring-yellow-500/20 transition-all duration-200 outline-none"},"            ",512),[[i,l.data.comment]]),t("div",ce,[t("button",{onClick:e[7]||(e[7]=o=>g.value=!1),class:"px-3 py-1 text-xs text-gray-400 hover:text-white transition-colors"}," Cancel "),t("button",{onClick:N,class:"px-3 py-1 text-xs bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 rounded transition-colors"}," Save ")])])):m("",!0),t("div",ge,[t("div",be,[e[23]||(e[23]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Model",-1)),n(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.data.modelName=o),onChange:e[9]||(e[9]=o=>{l.data.recordId="",l.data.sourceVariable=""}),class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},[e[22]||(e[22]=t("option",{value:""},"Select a model",-1)),(s(!0),a(I,null,S(C.value,o=>(s(),a("option",{key:o,value:o},p(o),9,me))),128))],544),[[P,l.data.modelName]])]),t("div",fe,[e[24]||(e[24]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Source Variable (Optional)",-1)),n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.data.sourceVariable=o),type:"text",placeholder:"e.g., extractedId, userId",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none",onInput:e[11]||(e[11]=o=>{l.data.recordId=""})},null,544),[[i,l.data.sourceVariable]]),t("div",pe,"Use "+p(r.variableName)+" to reference other variables",1)]),l.data.sourceVariable?m("",!0):(s(),a("div",xe,[e[25]||(e[25]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Record ID (Direct Input)",-1)),n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.data.recordId=o),type:"text",placeholder:"e.g., 123, abc-xyz",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[i,l.data.recordId]])])),t("div",we,[e[26]||(e[26]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Output Key",-1)),n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>l.data.outputKey=o),placeholder:"Variable output key (e.g., fetchedUser)",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[i,l.data.outputKey]])]),t("div",ye,[e[27]||(e[27]=t("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Field to Extract (Optional)",-1)),n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>l.data.fieldToExtract=o),placeholder:"e.g., name, email, id (leave empty for full record)",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[i,l.data.fieldToExtract]]),e[28]||(e[28]=t("div",{class:"text-xs text-purple-400/70"},"Specify a field name to return only that field value, or leave empty to return the entire record",-1))]),e[29]||(e[29]=R('<div class="flex items-center justify-between pt-2" data-v-285490ef><div class="flex items-center gap-2" data-v-285490ef><div class="w-3 h-3 bg-green-500 rounded-full shadow-lg" data-v-285490ef></div><span class="text-xs text-gray-400" data-v-285490ef>Record Found</span></div><div class="flex items-center gap-2" data-v-285490ef><div class="w-3 h-3 bg-red-500 rounded-full shadow-lg" data-v-285490ef></div><span class="text-xs text-gray-400" data-v-285490ef>Not Found</span></div></div>',1))]),t("div",ve,[d(u(T),{type:"target",position:"left",class:"!w-4 !h-4 !bg-gray-600 !border-2 !border-gray-800 hover:!bg-purple-500 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})]),t("div",he,[d(u(T),{type:"source",position:"right",id:"true",class:"!w-4 !h-4 !bg-green-500 !border-2 !border-gray-800 hover:!bg-green-400 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})]),t("div",ke,[d(u(T),{type:"source",position:"bottom",id:"false",class:"!w-4 !h-4 !bg-red-500 !border-2 !border-gray-800 hover:!bg-red-400 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})])],2))}}),Ie=B(Te,[["__scopeId","data-v-285490ef"]]);export{Ie as default};
