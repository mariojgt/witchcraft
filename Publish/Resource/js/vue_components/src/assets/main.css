/* ALL @import statements MUST be at the very top */
@import "tailwindcss";
@import "@vue-flow/core/dist/style.css";
@import "@vue-flow/core/dist/theme-default.css";

/* Base styles */
html, body, #app {
  margin: 0;
  height: 100%;
  background: #0a0a0a;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.vue-flow {
  background: #0a0a0a;
  background-image: radial-gradient(#1a1a1a 1px, transparent 1px);
  background-size: 20px 20px;
}

/* Fast, smooth nodes */
.vue-flow__node {
  min-width: 200px;
  border-radius: 8px;
  background: #111111;
  border: 1px solid #333333;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
  font-size: 14px;
  will-change: transform;
  transform: translateZ(0); /* Enable hardware acceleration */
}

.vue-flow__node:hover {
  border-color: #4a5568;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

/* Simple selection state */
.vue-flow__node.selected {
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

/* Prevent double-click on text fields from affecting nodes */
.vue-flow__node input,
.vue-flow__node textarea,
.vue-flow__node select {
  pointer-events: auto;
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
}

.vue-flow__node input:focus,
.vue-flow__node textarea:focus,
.vue-flow__node select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 1px #3b82f6;
}

/* Clean edges */
.vue-flow__edge-path {
  stroke: #4a5568;
  stroke-width: 2;
  transition: stroke 0.15s ease, stroke-width 0.15s ease;
}

.vue-flow__edge:hover .vue-flow__edge-path {
  stroke: #6b7280;
  stroke-width: 2.5;
}

.vue-flow__edge.selected .vue-flow__edge-path {
  stroke: #3b82f6;
  stroke-width: 3;
}

/* Bigger, more accessible connection handles */
.vue-flow__handle {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #4a5568;
  border: 2px solid #111111;
  transition: all 0.15s ease;
  cursor: pointer;
}

.vue-flow__handle:hover {
  /* transform: scale(1.25); */
  background: #6366f1;
  border-color: #ffffff;
  box-shadow: 0 0 8px rgba(99, 102, 241, 0.5);
}

/* Source and target handle styling */
.vue-flow__handle-source {
  background: #10b981;
}

.vue-flow__handle-target {
  background: #f59e0b;
}

/* Minimal simulation states */
.simulation-mode .vue-flow__node {
  opacity: 0.6;
}

.vue-flow__node.current {
  opacity: 1 !important;
  border-color: #3b82f6 !important;
  box-shadow:
    0 0 0 2px rgba(59, 130, 246, 0.4),
    0 0 12px rgba(59, 130, 246, 0.3) !important;
  animation: currentPulse 2s ease-in-out infinite;
}

@keyframes currentPulse {
  0%, 100% {
    box-shadow:
      0 0 0 2px rgba(59, 130, 246, 0.4),
      0 0 12px rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow:
      0 0 0 3px rgba(59, 130, 246, 0.5),
      0 0 16px rgba(59, 130, 246, 0.4);
  }
}

.vue-flow__node.processing {
  opacity: 1 !important;
  border-color: #06b6d4 !important;
  box-shadow: 0 0 8px rgba(6, 182, 212, 0.4) !important;
}

.vue-flow__node.completed {
  opacity: 1 !important;
  border-color: #10b981 !important;
  box-shadow: 0 0 8px rgba(16, 185, 129, 0.4) !important;
}

.vue-flow__node.error {
  opacity: 1 !important;
  border-color: #ef4444 !important;
  box-shadow: 0 0 8px rgba(239, 68, 68, 0.4) !important;
}

/* Clean selection box */
.vue-flow__selection {
  background: rgba(59, 130, 246, 0.1) !important;
  border: 1px solid rgba(59, 130, 246, 0.4) !important;
  border-radius: 4px !important;
}

/* Minimal controls */
.vue-flow__controls {
  background: rgba(17, 17, 17, 0.95) !important;
  border: 1px solid #333333 !important;
  border-radius: 6px !important;
}

.vue-flow__controls button {
  background: transparent !important;
  border: none !important;
  color: #9ca3af !important;
  transition: color 0.2s ease !important;
}

.vue-flow__controls button:hover {
  color: #ffffff !important;
}

/* Simple minimap */
.vue-flow__minimap {
  background: rgba(17, 17, 17, 0.95) !important;
  border: 1px solid #333333 !important;
  border-radius: 6px !important;
}

/* Clean scrollbars */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #4a5568;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Performance optimizations */
.vue-flow__transformationpane {
  will-change: transform;
}

.vue-flow__node {
  will-change: transform, border-color, box-shadow;
}

.vue-flow__edge {
  will-change: stroke, stroke-width;
}

/* Dragging performance */
.vue-flow__node.dragging {
  pointer-events: none;
  z-index: 1000;
}

/* Prevent text selection during drag */
.vue-flow__node * {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* But allow text selection in input fields */
.vue-flow__node input,
.vue-flow__node textarea,
.vue-flow__node select {
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
}
