import{W as y,k as h,h as k,l as F,c as n,o as l,a as e,b as c,u as r,X as S,f as b,w as i,g,s as E,F as $,r as B,t as w,d as V,n as C,e as I,C as D,_ as N}from"./vue-CokR97iu.js";const M={class:"bg-white/[0.02] backdrop-blur-xl border border-white/10 rounded-xl p-5 min-w-[320px] relative shadow-2xl hover:shadow-pink-500/10 transition-all duration-300 hover:border-pink-500/30"},O={class:"flex items-center justify-between mb-4"},R={class:"flex items-center gap-3"},W={class:"w-9 h-9 bg-gradient-to-br from-pink-500/20 to-pink-600/20 rounded-lg flex items-center justify-center border border-pink-500/20"},z={class:"space-y-4"},q={class:"space-y-2"},A={class:"relative"},Q={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl z-50 max-h-40 overflow-y-auto"},X=["onClick"],G={class:"font-medium text-white"},H={class:"text-xs text-gray-400"},J={key:0,class:"bg-white/5 border border-white/10 rounded-lg p-3"},K={class:"text-sm font-medium text-pink-400"},P={class:"text-xs text-gray-400"},Y={class:"space-y-2"},Z={class:"grid grid-cols-2 gap-3"},_={class:"space-y-2"},ee={class:"space-y-2"},te={class:"space-y-3"},oe={class:"flex items-center gap-3 cursor-pointer group"},ae={class:"relative"},se={key:0,class:"ml-7 space-y-2"},le={class:"flex items-center gap-3 cursor-pointer group"},re={class:"relative"},ie={class:"absolute top-1/2 -left-2 transform -translate-y-1/2"},ne={class:"absolute top-1/2 -right-2 transform -translate-y-1/2"},be=Object.assign({nodeMetadata:{category:"Flow Control",icon:y,label:"Trigger Flow",initialData:{flowId:"",selectedFlow:null,inputVariable:"status",targetVariableName:"dataInput",waitForCompletion:!0,resultVariable:"flowResult",async:!1}}},{__name:"TriggerFlowNode",props:["data","variables"],emits:["delete"],setup(o,{emit:de}){const p=o,d=h(""),u=h(!1),f=h([]),m=h(!1);k(()=>p.variables?Object.keys(p.variables):[]),F(async()=>{await T()});const T=async()=>{try{m.value=!0;const s=await fetch("/api/witchcraft/diagrams");s.ok&&(f.value=await s.json())}catch(s){console.error("Failed to load flows:",s)}finally{m.value=!1}},x=k(()=>{if(!d.value)return f.value.slice(0,10);const s=d.value.toLowerCase();return f.value.filter(t=>t.name.toLowerCase().includes(s)||t.description?.toLowerCase().includes(s)||t.id.toString().includes(s)).slice(0,10)});let v;const j=()=>{clearTimeout(v),v=setTimeout(()=>{u.value=!0},300)},U=s=>{p.data.selectedFlow=s,p.data.flowId=s.id,d.value=s.name,u.value=!1},L=s=>{s.target.closest(".relative")||(u.value=!1)};return F(()=>{document.addEventListener("click",L)}),(s,t)=>(l(),n("div",M,[e("div",O,[e("div",R,[e("div",W,[c(r(y),{class:"w-5 h-5 text-pink-400"})]),t[9]||(t[9]=e("div",null,[e("h3",{class:"font-semibold text-white text-sm"},"Trigger Flow"),e("p",{class:"text-xs text-gray-400 leading-none mt-0.5"},"Execute other workflows")],-1))]),e("button",{onClick:t[0]||(t[0]=a=>s.$emit("delete")),class:"w-8 h-8 rounded-lg hover:bg-red-500/10 text-gray-400 hover:text-red-400 transition-all duration-200 flex items-center justify-center group"},[c(r(S),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})])]),e("div",z,[e("div",q,[t[10]||(t[10]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Target Flow",-1)),e("div",A,[i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>d.value=a),onInput:j,onFocus:t[2]||(t[2]=a=>u.value=!0),placeholder:"Search and select flow...",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 pr-10 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,544),[[g,d.value]]),c(r(E),{class:"absolute right-3 top-3 w-4 h-4 text-gray-400"}),u.value&&x.value.length>0?(l(),n("div",Q,[(l(!0),n($,null,B(x.value,a=>(l(),n("div",{key:a.id,onClick:ue=>U(a),class:"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0 transition-all duration-200"},[e("div",G,w(a.name),1),e("div",H,"ID: "+w(a.id)+" â€¢ "+w(a.description||"No description"),1)],8,X))),128))])):b("",!0)]),o.data.selectedFlow?(l(),n("div",J,[e("div",K,"Selected: "+w(o.data.selectedFlow.name),1),e("div",P,"ID: "+w(o.data.selectedFlow.id),1)])):b("",!0)]),e("div",Y,[t[11]||(t[11]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Or Flow ID",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.data.flowId=a),type:"number",placeholder:"Enter flow ID manually",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.flowId]]),t[12]||(t[12]=e("div",{class:"text-xs text-pink-400/70"},"Use this if you know the exact Flow ID",-1))]),e("div",Z,[e("div",_,[t[13]||(t[13]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Input Variable",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.data.inputVariable=a),placeholder:"status",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.inputVariable]])]),e("div",ee,[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Target Variable Name",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.data.targetVariableName=a),placeholder:"dataInput",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.targetVariableName]])])]),e("div",te,[e("label",oe,[e("div",ae,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>o.data.waitForCompletion=a),class:"sr-only"},null,512),[[V,o.data.waitForCompletion]]),e("div",{class:C(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-pink-400/50 transition-colors flex items-center justify-center",o.data.waitForCompletion?"bg-pink-500 border-pink-500":""])},[o.data.waitForCompletion?(l(),I(r(D),{key:0,class:"w-3 h-3 text-white"})):b("",!0)],2)]),t[15]||(t[15]=e("span",{class:"text-sm text-gray-300 group-hover:text-white transition-colors"},"Wait for Completion",-1))]),o.data.waitForCompletion?(l(),n("div",se,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Result Variable",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>o.data.resultVariable=a),placeholder:"flowResult",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-200 outline-none"},null,512),[[g,o.data.resultVariable]])])):b("",!0),e("label",le,[e("div",re,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>o.data.async=a),class:"sr-only"},null,512),[[V,o.data.async]]),e("div",{class:C(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-pink-400/50 transition-colors flex items-center justify-center",o.data.async?"bg-pink-500 border-pink-500":""])},[o.data.async?(l(),I(r(D),{key:0,class:"w-3 h-3 text-white"})):b("",!0)],2)]),t[17]||(t[17]=e("span",{class:"text-sm text-gray-300 group-hover:text-white transition-colors"},"Async Execution",-1))])])]),e("div",ie,[c(r(N),{type:"target",position:"left",class:"!w-4 !h-4 !bg-gray-600 !border-2 !border-gray-800 hover:!bg-pink-500 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})]),e("div",ne,[c(r(N),{type:"source",position:"right",class:"!w-4 !h-4 !bg-pink-500 !border-2 !border-gray-800 hover:!bg-pink-400 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})])]))}});export{be as default};
