import{B as p,k as b,l as N,c as d,o as a,a as e,b as n,u as i,X as U,w as r,v as g,F as h,r as w,g as m,d as v,n as x,e as f,f as y,C as k,_ as B,t as M}from"./vue-CokR97iu.js";const T={class:"bg-white/[0.02] backdrop-blur-xl border border-white/10 rounded-xl p-5 min-w-[320px] relative shadow-2xl hover:shadow-purple-500/10 transition-all duration-300 hover:border-purple-500/30"},E={class:"flex items-center justify-between mb-4"},D={class:"flex items-center gap-3"},K={class:"w-9 h-9 bg-gradient-to-br from-purple-500/20 to-purple-600/20 rounded-lg flex items-center justify-center border border-purple-500/20"},O={class:"space-y-4"},S={class:"space-y-2"},$=["value"],L={class:"space-y-2"},z={class:"space-y-2"},P={class:"bg-white/5 border border-white/10 rounded-lg p-3 space-y-2 max-h-32 overflow-y-auto"},R={class:"relative"},W=["value"],X={class:"text-sm text-gray-300 group-hover:text-white transition-colors"},q={class:"grid grid-cols-2 gap-3"},A={class:"space-y-2"},G={class:"space-y-2"},H=["placeholder"],I={class:"pt-2"},J={class:"flex items-center gap-3 cursor-pointer group"},Q={class:"relative"},Y={class:"absolute top-1/2 -right-2 transform -translate-y-1/2"},ee=Object.assign({nodeMetadata:{category:"Start",icon:p,label:"Model Events",initialData:{modelName:"",eventType:"updated",watchFields:[],outputKey:"modelEvent",outputValue:"",testMode:!1}}},{__name:"ModelSelectNode",props:["data"],emits:["delete"],setup(s,{emit:Z}){const V=s,u=b([]),c=b([]);N(()=>{F()});const F=async()=>{try{const l=await fetch("/api/witchcraft/tables");u.value=await l.json()}catch(l){console.error("Failed to fetch models:",l)}},j=async()=>{try{const l=await fetch(`/api/witchcraft/tables/${V.data.modelName}/columns`);c.value=await l.json()}catch(l){console.error("Failed to fetch fields:",l)}};return(l,t)=>(a(),d("div",T,[e("div",E,[e("div",D,[e("div",K,[n(i(p),{class:"w-5 h-5 text-purple-400"})]),t[7]||(t[7]=e("div",null,[e("h3",{class:"font-semibold text-white text-sm"},"Model Events"),e("p",{class:"text-xs text-gray-400 leading-none mt-0.5"},"Listen to database model events")],-1))]),e("button",{onClick:t[0]||(t[0]=o=>l.$emit("delete")),class:"w-8 h-8 rounded-lg hover:bg-red-500/10 text-gray-400 hover:text-red-400 transition-all duration-200 flex items-center justify-center group"},[n(i(U),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})])]),e("div",O,[e("div",S,[t[8]||(t[8]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Model",-1)),r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.data.modelName=o),onChange:j,class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},[(a(!0),d(h,null,w(u.value,o=>(a(),d("option",{key:o,value:o},M(o),9,$))),128))],544),[[g,s.data.modelName]])]),e("div",L,[t[10]||(t[10]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Event Type",-1)),r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.data.eventType=o),class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},t[9]||(t[9]=[e("option",{value:"created"},"Created",-1),e("option",{value:"updated"},"Updated",-1),e("option",{value:"deleted"},"Deleted",-1),e("option",{value:"restored"},"Restored",-1)]),512),[[g,s.data.eventType]])]),e("div",z,[t[11]||(t[11]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Watch Fields",-1)),e("div",P,[(a(!0),d(h,null,w(c.value,o=>(a(),d("label",{key:o,class:"flex items-center gap-3 cursor-pointer group"},[e("div",R,[r(e("input",{type:"checkbox",value:o,"onUpdate:modelValue":t[3]||(t[3]=C=>s.data.watchFields=C),class:"sr-only"},null,8,W),[[v,s.data.watchFields]]),e("div",{class:x(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-purple-400/50 transition-colors flex items-center justify-center",s.data.watchFields.includes(o)?"bg-purple-500 border-purple-500":""])},[s.data.watchFields.includes(o)?(a(),f(i(k),{key:0,class:"w-3 h-3 text-white"})):y("",!0)],2)]),e("span",X,M(o),1)]))),128))])]),e("div",q,[e("div",A,[t[12]||(t[12]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Output Key",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.data.outputKey=o),placeholder:"Variable output key",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[m,s.data.outputKey]])]),e("div",G,[t[13]||(t[13]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Output Value",-1)),r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.data.outputValue=o),placeholder:l.getOutputPlaceholder,class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,8,H),[[m,s.data.outputValue]])])]),e("div",I,[e("label",J,[e("div",Q,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>s.data.testMode=o),class:"sr-only"},null,512),[[v,s.data.testMode]]),e("div",{class:x(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-purple-400/50 transition-colors flex items-center justify-center",s.data.testMode?"bg-purple-500 border-purple-500":""])},[s.data.testMode?(a(),f(i(k),{key:0,class:"w-3 h-3 text-white"})):y("",!0)],2)]),t[14]||(t[14]=e("span",{class:"text-sm text-gray-300 group-hover:text-white transition-colors"},"Test Mode",-1))])])]),e("div",Y,[n(i(B),{type:"source",position:"right",id:"event",class:"!w-4 !h-4 !bg-purple-500 !border-2 !border-gray-800 hover:!bg-purple-400 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})])]))}});export{ee as default};
