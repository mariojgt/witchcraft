import{_ as H,B as S,r as u,m as W,z as X,c as s,o as a,a as e,b as m,n as c,d as g,u as i,w as n,t as w,v as p,e as F,M as k,S as Y,X as J,F as T,f as C,g as U,h as $,i as N,C as D,j as Q,k as Z,l as _}from"./vue-B8gUvkUI.js";const ee={class:"flex items-center justify-between mb-4"},te={class:"flex items-center gap-3 flex-1 min-w-0"},oe={class:"flex-1 min-w-0"},le=["title"],ae={class:"flex items-center gap-2 mt-0.5"},re={class:"text-xs text-gray-400 leading-none truncate"},se={class:"w-3 h-3 bg-yellow-500/30 border border-yellow-500/50 rounded-full flex items-center justify-center"},ne={key:0,class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50"},ie={class:"bg-gray-900/95 backdrop-blur-sm border border-gray-700 rounded-lg p-3 shadow-xl max-w-xs"},de={class:"text-xs text-gray-200 whitespace-pre-wrap"},ue={class:"flex items-center gap-1 ml-2"},ce={key:0,class:"mb-4 p-3 bg-white/5 border border-white/10 rounded-lg space-y-3"},ge={class:"space-y-2"},be={class:"space-y-2"},me={class:"space-y-2"},pe={class:"flex gap-2"},fe=["onClick","title"],we={key:1,class:"mb-4 p-3 bg-yellow-500/5 border border-yellow-500/20 rounded-lg"},xe={class:"flex items-center gap-2 mb-2"},ye={class:"flex justify-end gap-2 mt-2"},ve={class:"space-y-4"},he={class:"space-y-2"},ke=["value"],Te={class:"space-y-2"},Ce={class:"space-y-2"},Me={class:"bg-white/5 border border-white/10 rounded-lg p-3 space-y-2 max-h-32 overflow-y-auto"},Ve={class:"relative"},Ee=["value"],je={class:"text-sm text-gray-300 group-hover:text-white transition-colors"},Se={class:"grid grid-cols-2 gap-3"},Fe={class:"space-y-2"},Ue={class:"space-y-2"},$e=["placeholder"],Ne={class:"pt-2"},De={class:"flex items-center gap-3 cursor-pointer group"},Be={class:"relative"},Ke={class:"absolute top-1/2 -right-2 transform -translate-y-1/2"},ze=Object.assign({nodeMetadata:{category:"Start",icon:S,label:"Model Events",initialData:{modelName:"",eventType:"updated",watchFields:[],outputKey:"modelEvent",outputValue:"",testMode:!1,customTitle:"",customDescription:"",comment:"",colorTheme:"purple"}}},{__name:"ModelSelectNode",props:["data"],emits:["delete"],setup(l,{emit:Ie}){const d=l,M=u([]),V=u([]),b=u(!1),x=u(!1),y=u(!1),f=u(""),v=u(null),h=u(!1),B=[{name:"purple",label:"Purple",gradient:"linear-gradient(145deg, #8b5cf6, #7c3aed)"},{name:"blue",label:"Blue",gradient:"linear-gradient(145deg, #3b82f6, #1d4ed8)"},{name:"green",label:"Green",gradient:"linear-gradient(145deg, #10b981, #059669)"},{name:"red",label:"Red",gradient:"linear-gradient(145deg, #ef4444, #dc2626)"},{name:"yellow",label:"Yellow",gradient:"linear-gradient(145deg, #f59e0b, #d97706)"},{name:"pink",label:"Pink",gradient:"linear-gradient(145deg, #ec4899, #db2777)"},{name:"gray",label:"Gray",gradient:"linear-gradient(145deg, #6b7280, #4b5563)"},{name:"orange",label:"Orange",gradient:"linear-gradient(145deg, #f97316, #ea580c)"}];function K(){const r=d.data.colorTheme||"purple",t={purple:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 border-purple-500/20",blue:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 border-blue-500/20",green:"bg-gradient-to-br from-green-500/20 to-green-600/20 border-green-500/20",red:"bg-gradient-to-br from-red-500/20 to-red-600/20 border-red-500/20",yellow:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/20 border-yellow-500/20",pink:"bg-gradient-to-br from-pink-500/20 to-pink-600/20 border-pink-500/20",gray:"bg-gradient-to-br from-gray-500/20 to-gray-600/20 border-gray-500/20",orange:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 border-orange-500/20"};return t[r]||t.purple}function z(){const r=d.data.colorTheme||"purple",t={purple:"text-purple-400",blue:"text-blue-400",green:"text-green-400",red:"text-red-400",yellow:"text-yellow-400",pink:"text-pink-400",gray:"text-gray-400",orange:"text-orange-400"};return t[r]||t.purple}function I(){b.value=!b.value,x.value=!1}function O(){b.value=!1}function P(){x.value=!x.value,b.value=!1}function A(){y.value=!0,f.value=d.data.customTitle||"Model Events",Z(()=>{v.value?.focus(),v.value?.select()})}function E(){d.data.customTitle=f.value.trim(),y.value=!1}function G(){y.value=!1,f.value=""}const L=W(()=>d.data.eventType==="created"?"New record data":d.data.eventType==="updated"?"Updated record data":d.data.eventType==="deleted"?"Deleted record data":"Event data");X(()=>{R()});const R=async()=>{try{const r=await fetch("/api/witchcraft/tables");M.value=await r.json()}catch(r){console.error("Failed to fetch models:",r)}},q=async()=>{try{const r=await fetch(`/api/witchcraft/tables/${d.data.modelName}/columns`);V.value=await r.json()}catch(r){console.error("Failed to fetch fields:",r)}};return(r,t)=>(a(),s("div",{class:c(`bg-white/[0.02] backdrop-blur-xl border border-white/10 rounded-xl p-5 min-w-[320px] relative shadow-2xl transition-all duration-300 node-${l.data.colorTheme||"purple"}`)},[e("div",ee,[e("div",te,[e("div",{class:c(["w-9 h-9 rounded-lg flex items-center justify-center border transition-all duration-300",K()])},[g(i(S),{class:c(`w-5 h-5 transition-colors duration-300 ${z()}`)},null,8,["class"])],2),e("div",oe,[y.value?n((a(),s("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=o=>f.value=o),onBlur:E,onKeydown:[F(E,["enter"]),F(G,["escape"])],ref_key:"titleInput",ref:v,class:"font-semibold text-white text-sm bg-transparent border-b border-purple-500 outline-none w-full",placeholder:"Enter custom title"},null,544)),[[p,f.value]]):(a(),s("div",{key:0,onClick:A,class:"font-semibold text-white text-sm cursor-pointer hover:text-purple-400 transition-colors truncate",title:l.data.customTitle||"Model Events"},w(l.data.customTitle||"Model Events"),9,le)),e("div",ae,[e("p",re,w(l.data.customDescription||"Listen to database model events"),1),l.data.comment&&l.data.comment.trim()?(a(),s("div",{key:0,class:"relative comment-indicator",onMouseenter:t[1]||(t[1]=o=>h.value=!0),onMouseleave:t[2]||(t[2]=o=>h.value=!1)},[e("div",se,[g(i(k),{class:"w-2 h-2 text-yellow-400"})]),h.value?(a(),s("div",ne,[e("div",ie,[t[14]||(t[14]=e("div",{class:"text-xs font-medium text-yellow-400 mb-1"},"Comment:",-1)),e("div",de,w(l.data.comment),1),t[15]||(t[15]=e("div",{class:"absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-900 border-r border-b border-gray-700 rotate-45"},null,-1))])])):m("",!0)],32)):m("",!0)])])]),e("div",ue,[e("button",{onClick:I,class:c(`w-8 h-8 rounded-lg transition-all duration-200 flex items-center justify-center group ${l.data.comment&&l.data.comment.trim()?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"hover:bg-yellow-500/10 text-gray-400 hover:text-yellow-400"}`),title:"Add/Edit Comment"},[g(i(k),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})],2),e("button",{onClick:P,class:"w-8 h-8 rounded-lg hover:bg-purple-500/10 text-gray-400 hover:text-purple-400 transition-all duration-200 flex items-center justify-center group",title:"Node Settings"},[g(i(Y),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})]),e("button",{onClick:t[3]||(t[3]=o=>r.$emit("delete")),class:"w-8 h-8 rounded-lg hover:bg-red-500/10 text-gray-400 hover:text-red-400 transition-all duration-200 flex items-center justify-center group"},[g(i(J),{class:"w-4 h-4 group-hover:scale-110 transition-transform"})])])]),x.value?(a(),s("div",ce,[e("div",ge,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Custom Title",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.data.customTitle=o),placeholder:"Enter custom node title",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[p,l.data.customTitle]])]),e("div",be,[t[17]||(t[17]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Custom Description",-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.data.customDescription=o),placeholder:"Enter custom description",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[p,l.data.customDescription]])]),e("div",me,[t[18]||(t[18]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Color Theme",-1)),e("div",pe,[(a(),s(T,null,C(B,o=>e("button",{key:o.name,onClick:j=>l.data.colorTheme=o.name,class:c(`w-6 h-6 rounded-lg border-2 transition-all duration-200 ${l.data.colorTheme===o.name?"border-white scale-110":"border-gray-600 hover:border-gray-500"}`),style:_({background:o.gradient}),title:o.label},null,14,fe)),64))])])])):m("",!0),b.value?(a(),s("div",we,[e("div",xe,[g(i(k),{class:"w-4 h-4 text-yellow-400"}),t[19]||(t[19]=e("span",{class:"text-sm font-medium text-yellow-400"},"Comment",-1))]),n(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.data.comment=o),placeholder:"Add a comment to help document this node's purpose...",rows:"3",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-gray-500 resize-none focus:bg-white/10 focus:border-yellow-500/50 focus:ring-2 focus:ring-yellow-500/20 transition-all duration-200 outline-none"},"            ",512),[[p,l.data.comment]]),e("div",ye,[e("button",{onClick:t[7]||(t[7]=o=>b.value=!1),class:"px-3 py-1 text-xs text-gray-400 hover:text-white transition-colors"}," Cancel "),e("button",{onClick:O,class:"px-3 py-1 text-xs bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 rounded transition-colors"}," Save ")])])):m("",!0),e("div",ve,[e("div",he,[t[20]||(t[20]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Model",-1)),n(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.data.modelName=o),onChange:q,class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},[(a(!0),s(T,null,C(M.value,o=>(a(),s("option",{key:o,value:o},w(o),9,ke))),128))],544),[[U,l.data.modelName]])]),e("div",Te,[t[22]||(t[22]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Event Type",-1)),n(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.data.eventType=o),class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},t[21]||(t[21]=[e("option",{value:"created"},"Created",-1),e("option",{value:"updated"},"Updated",-1),e("option",{value:"deleted"},"Deleted",-1),e("option",{value:"restored"},"Restored",-1)]),512),[[U,l.data.eventType]])]),e("div",Ce,[t[23]||(t[23]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Watch Fields",-1)),e("div",Me,[(a(!0),s(T,null,C(V.value,o=>(a(),s("label",{key:o,class:"flex items-center gap-3 cursor-pointer group"},[e("div",Ve,[n(e("input",{type:"checkbox",value:o,"onUpdate:modelValue":t[10]||(t[10]=j=>l.data.watchFields=j),class:"sr-only"},null,8,Ee),[[$,l.data.watchFields]]),e("div",{class:c(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-purple-400/50 transition-colors flex items-center justify-center",l.data.watchFields.includes(o)?"bg-purple-500 border-purple-500":""])},[l.data.watchFields.includes(o)?(a(),N(i(D),{key:0,class:"w-3 h-3 text-white"})):m("",!0)],2)]),e("span",je,w(o),1)]))),128))])]),e("div",Se,[e("div",Fe,[t[24]||(t[24]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Output Key",-1)),n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.data.outputKey=o),placeholder:"Variable output key",class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,512),[[p,l.data.outputKey]])]),e("div",Ue,[t[25]||(t[25]=e("label",{class:"block text-xs font-medium text-gray-300 tracking-wide"},"Output Value",-1)),n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>l.data.outputValue=o),placeholder:L.value,class:"w-full text-sm bg-white/5 border border-white/10 rounded-lg px-3 py-2.5 text-white placeholder-gray-500 focus:bg-white/10 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-200 outline-none"},null,8,$e),[[p,l.data.outputValue]])])]),e("div",Ne,[e("label",De,[e("div",Be,[n(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=o=>l.data.testMode=o),class:"sr-only"},null,512),[[$,l.data.testMode]]),e("div",{class:c(["w-4 h-4 border-2 border-white/20 rounded group-hover:border-purple-400/50 transition-colors flex items-center justify-center",l.data.testMode?"bg-purple-500 border-purple-500":""])},[l.data.testMode?(a(),N(i(D),{key:0,class:"w-3 h-3 text-white"})):m("",!0)],2)]),t[26]||(t[26]=e("span",{class:"text-sm text-gray-300 group-hover:text-white transition-colors"},"Test Mode",-1))])])]),e("div",Ke,[g(i(Q),{type:"source",position:"right",id:"event",class:"!w-4 !h-4 !bg-purple-500 !border-2 !border-gray-800 hover:!bg-purple-400 hover:!scale-110 transition-all duration-200 !rounded-full shadow-lg"})])],2))}}),Pe=H(ze,[["__scopeId","data-v-6f133fef"]]);export{Pe as default};
