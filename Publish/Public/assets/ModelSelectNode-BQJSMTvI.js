import{B as c,h as g,i as V,o as r,c as d,a as e,b as n,u,X as F,w as o,v as b,F as y,r as v,d as x,e as f,_ as N,t as m}from"./vue-BA_kCxex.js";const U={class:"bg-gray-900/95 backdrop-blur border-[1px] border-purple-500/30 rounded-xl p-4 min-w-[300px] relative text-gray-100"},T={class:"flex justify-between items-center mb-4 pb-2 border-b border-purple-500/30"},B={class:"flex items-center gap-2"},E={class:"space-y-4"},j={class:"space-y-2"},C=["value"],D={class:"space-y-2"},K={class:"space-y-2"},O={class:"bg-gray-800 rounded-lg p-3 space-y-2"},S=["value"],$={class:"text-sm"},L={class:"space-y-2"},P={class:"space-y-2"},R=["placeholder"],W={class:"space-y-2"},X={class:"flex items-center gap-2"},q={class:"absolute top-1/2 -right-3 w-3 h-6 bg-gray-800 rounded-r-lg border-r-2 border-y-2 border-purple-500/50"},G=Object.assign({nodeMetadata:{category:"Start",icon:c,label:"Model Events",initialData:{modelName:"",eventType:"updated",watchFields:[],outputKey:"modelEvent",outputValue:"",testMode:!1}}},{__name:"ModelSelectNode",props:["data"],emits:["delete"],setup(a,{emit:z}){const w=a,i=g([]),p=g([]);V(()=>{h()});const h=async()=>{try{const l=await fetch("/api/models");i.value=await l.json()}catch(l){console.error("Failed to fetch models:",l)}},k=async()=>{try{const l=await fetch(`/api/models/${w.data.modelName}/fields`);p.value=await l.json()}catch(l){console.error("Failed to fetch fields:",l)}};return(l,t)=>(r(),d("div",U,[e("div",T,[e("div",B,[n(u(c),{class:"w-5 h-5 text-purple-400"}),t[7]||(t[7]=e("h3",{class:"font-bold text-purple-400"},"Model Events",-1))]),e("button",{onClick:t[0]||(t[0]=s=>l.$emit("delete")),class:"hover:bg-red-500/20 p-1 rounded transition-colors"},[n(u(F),{class:"w-4 h-4 text-red-400"})])]),e("div",E,[e("div",j,[t[8]||(t[8]=e("label",{class:"text-xs uppercase tracking-wider text-purple-400"},"Model",-1)),o(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.data.modelName=s),onChange:k,class:"w-full bg-gray-800 border-0 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-100"},[(r(!0),d(y,null,v(i.value,s=>(r(),d("option",{key:s,value:s},m(s),9,C))),128))],544),[[b,a.data.modelName]])]),e("div",D,[t[10]||(t[10]=e("label",{class:"text-xs uppercase tracking-wider text-purple-400"},"Event Type",-1)),o(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.data.eventType=s),class:"w-full bg-gray-800 border-0 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-100"},t[9]||(t[9]=[e("option",{value:"created"},"Created",-1),e("option",{value:"updated"},"Updated",-1),e("option",{value:"deleted"},"Deleted",-1),e("option",{value:"restored"},"Restored",-1)]),512),[[b,a.data.eventType]])]),e("div",K,[t[11]||(t[11]=e("label",{class:"text-xs uppercase tracking-wider text-purple-400"},"Watch Fields",-1)),e("div",O,[(r(!0),d(y,null,v(p.value,s=>(r(),d("label",{key:s,class:"flex items-center gap-2 text-gray-300 hover:text-purple-400 transition-colors cursor-pointer"},[o(e("input",{type:"checkbox",value:s,"onUpdate:modelValue":t[3]||(t[3]=M=>a.data.watchFields=M),class:"rounded border-0 bg-gray-700 text-purple-500 focus:ring-purple-500"},null,8,S),[[f,a.data.watchFields]]),e("span",$,m(s),1)]))),128))])]),e("div",L,[t[12]||(t[12]=e("label",{class:"text-xs uppercase tracking-wider text-purple-400"},"Output Key",-1)),o(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.data.outputKey=s),placeholder:"Variable output key",class:"w-full bg-gray-800 border-0 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-100"},null,512),[[x,a.data.outputKey]])]),e("div",P,[t[13]||(t[13]=e("label",{class:"text-xs uppercase tracking-wider text-purple-400"},"Output Value",-1)),o(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.data.outputValue=s),placeholder:l.getOutputPlaceholder,class:"w-full bg-gray-800 border-0 rounded-lg focus:ring-2 focus:ring-purple-500 text-gray-100"},null,8,R),[[x,a.data.outputValue]])]),e("div",W,[e("label",X,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>a.data.testMode=s),class:"rounded border-0 bg-gray-700 text-purple-500 focus:ring-purple-500"},null,512),[[f,a.data.testMode]]),t[14]||(t[14]=e("span",{class:"text-xs uppercase tracking-wider text-purple-400"}," Test Mode ",-1))])])]),e("div",q,[n(u(N),{type:"source",position:"right",id:"event",class:"!bg-purple-500"})])]))}});export{G as default};
